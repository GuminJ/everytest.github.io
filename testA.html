<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🍚 밥 습관으로 보는 나의 회사 타입</title>
  <meta name="description" content="카드 선택형 심리테스트 · 밥 먹는 습관으로 알아보는 나에게 맞는 회사 타입" />
  <meta property="og:title" content="밥 습관 회사 타입 테스트" />
  <meta property="og:description" content="카드 뽑기처럼 골라보세요. 웃기지만 은근 맞는 결과!" />
  <meta property="og:type" content="website" />
  <style>
    :root{
      /* 파스텔 테마 (기존 스타일 유지) */
      --bg:#fff7fb; --bg-grad1:#ffeef7; --bg-grad2:#fffdf7;
      --card:#ffffff; --text:#3a3746; --muted:#7a7788;
      --accent:#ff93b6; --accent-2:#75d6c7; --shadow:0 14px 32px rgba(255,147,182,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Helvetica, Arial; color:var(--text);
      background: radial-gradient(900px 500px at 20% -10%, var(--bg-grad1) 0%, var(--bg) 40%, var(--bg-grad2) 100%);}
    .wrap{max-width:980px; margin:0 auto; padding:32px 18px 64px}
    .brand{display:flex; align-items:center; gap:10px; margin-bottom:14px}
    .brand .heart{width:10px; height:10px; border-radius:8px; background:var(--accent); box-shadow:0 0 0 6px rgba(255,147,182,.18)}
    h1{font-size:clamp(24px, 4vw, 38px); margin:0}
    p.lead{margin:6px 0 0; color:var(--muted)}

    .card{background:var(--card); border:1px solid rgba(58,55,70,.06); border-radius:22px; box-shadow:var(--shadow)}
    .inner{padding:26px}

    .hero{display:grid; gap:18px}
    @media(min-width:860px){.hero{grid-template-columns:1.3fr .7fr}}
    .hero .visual{background: linear-gradient(135deg, #fff0f5, #e9fff9); border-radius:18px; padding:16px; display:flex; align-items:center; justify-content:center}
    .hero .visual .bubble{width:96px; height:96px; border-radius:24px; background:#fff; border:1px solid rgba(58,55,70,.06); box-shadow:var(--shadow); display:grid; place-items:center; font-size:36px}

    .btn{appearance:none; border:none; border-radius:14px; padding:14px 18px; font-weight:800; cursor:pointer; color:#fff; background: linear-gradient(135deg, var(--accent), #ffc2d8); box-shadow:0 10px 18px rgba(255,147,182,.35)}
    .btn.secondary{background: linear-gradient(135deg, #94e3d5, var(--accent-2)); color:#103a37}
    .btn.ghost{background:#fff; color:var(--text); border:1px solid rgba(58,55,70,.1); box-shadow:none}
    .btn:disabled{opacity:.55; cursor:not-allowed}

    .progress{height:10px; width:100%; background:rgba(58,55,70,.06); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width .25s}

    /* 카드 선택 UI */
    .q{margin-top:18px; padding:18px; border-radius:16px; background:#fff8fb; border:1px solid rgba(58,55,70,.08)}
    .q h3{margin:0 0 12px; font-size:18px}

    .card-grid{display:grid; gap:14px; margin-top:10px}
    @media(min-width:720px){.card-grid{grid-template-columns: repeat(3, 1fr)}}

    .choice{display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px; border-radius:16px; background:#fff; border:1px solid rgba(58,55,70,.12); cursor:pointer; transition:transform .08s ease, box-shadow .08s ease, border-color .08s ease}
    .choice:hover{transform:translateY(-2px); box-shadow:0 10px 22px rgba(255,147,182,.18); border-color:var(--accent)}
    .thumb{width:100%; aspect-ratio:1/1; border-radius:12px; background:#fafafa; display:grid; place-items:center; overflow:hidden; border:1px dashed rgba(58,55,70,.12)}
    .thumb img{width:100%; height:100%; object-fit:contain}
    .label{font-weight:700; text-align:center}
    .sub{font-size:13px; color:var(--muted); text-align:center}

    .result{display:none}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#fff; border:1px solid rgba(58,55,70,.12); color:#db3b77; font-weight:800}
    .grid{display:grid; gap:14px}
    @media(min-width:720px){.grid{grid-template-columns: repeat(2,1fr)}}

    footer{margin-top:20px; color:var(--muted); font-size:13px}
    .small{font-size:13px; color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand"><span class="heart"></span><div>
      <h1>🍚 밥 습관으로 보는 나의 회사 타입</h1>
      <p class="lead">카드 뽑기처럼 골라보세요 · 웃기지만 은근 맞는 결과</p>
    </div></div>

    <!-- Intro -->
    <section id="intro" class="card">
      <div class="inner hero">
        <div>
          <h2 style="margin:0 0 8px 0">점심 습관으로 찾는 내 취향 회사 😋</h2>
          <p class="lead">카드를 골라주세요. 선택은 8번, 결과는 6가지 회사 타입 중 하나!</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <button class="btn" id="startBtn">시작하기</button>
            <button class="btn ghost" id="shareBtn" title="링크 복사">공유 링크 복사</button>
          </div>
          <footer>개인정보 수집 없음 · 이미지가 없다면 자리 표시(회색 상자)로 보입니다.</footer>
        </div>
        <div class="visual">
          <div class="bubble">🍱</div>
          <div class="bubble" style="margin-left:12px">🍜</div>
          <div class="bubble" style="margin-left:12px">🍗</div>
        </div>
      </div>
    </section>

    <!-- Test: 카드 선택형 -->
    <section id="test" class="card" style="display:none; margin-top:16px">
      <div class="inner">
        <div class="progress" aria-hidden="true"><i id="bar"></i></div>
        <div id="qWrap"></div>
        <div style="display:flex; gap:10px; margin-top:14px; flex-wrap:wrap">
          <button class="btn secondary" id="prevBtn">이전</button>
          <button class="btn" id="nextBtn">건너뛰기</button>
        </div>
        <p class="small" id="countText" style="margin-top:10px"></p>
      </div>
    </section>

    <!-- Result -->
    <section id="result" class="card result" style="margin-top:16px">
      <div class="inner">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap">
          <span class="badge" id="typeBadge">결과 유형</span>
          <button class="btn ghost" id="restartBtn">다시 테스트</button>
        </div>
        <h2 id="typeTitle" style="margin:10px 0 6px 0"></h2>
        <p id="typeDesc" class="lead"></p>
        <div class="grid" style="margin-top:16px">
          <div class="q">
            <h3>추천 포인트</h3>
            <ul id="strengths"></ul>
          </div>
          <div class="q">
            <h3>주의 포인트</h3>
            <ul id="risks"></ul>
          </div>
        </div>
        <div class="q" style="margin-top:16px">
          <h3>현실 적용 팁</h3>
          <ul id="tips"></ul>
        </div>
        <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
          <button class="btn" id="copyResult">결과 링크 복사</button>
        </div>
        <footer>참고용 자기이해 도구입니다. 의사결정은 상황과 맥락에 따라 검토하세요.</footer>
      </div>
    </section>
  </div>

  <script>
    // ====== 회사 타입(최종 결과) 정의 ======
    const COMPANY_TYPES = {
      BALANCE: {
        name: '워라밸 쵝오 🏖️',
        desc: '휴식과 여유, 개인 리듬을 존중하는 회사가 딱 맞아요.',
        strengths: ['유연근무/칼퇴 문화에서 컨디션 유지', '개별 몰입 시간 확보', '번아웃 방지형 조직과 궁합 Good'],
        risks: ['성장 속도 집착 조직과는 충돌', '회식·사교 강요 문화 피로', '모든 업무를 느긋하게는 X']
      },
      GROWTH: {
        name: '성장 드라이브 🚀',
        desc: '빠른 실행/목표 지향 환경에서 속도가 장점으로 작동합니다.',
        strengths: ['목표·지표 중심 실행', '스프린트/데드라인 드라이브', '실패-학습 루프 빠름'],
        risks: ['장기 워라밸 저하 위험', '관계/정서 케어 부족', '과속으로 품질 저하 주의']
      },
      PEOPLE: {
        name: '사람 중심 🐶',
        desc: '관계/소통이 최고의 복지인 회사에서 빛나요.',
        strengths: ['팀 케미/분위기 강화', '갈등 완충 역할', '온보딩/조율 능력'],
        risks: ['성과 가시성 낮을 수 있음', '감정소모 과다 주의', '경계선 관리 필요']
      },
      STABLE: {
        name: '반복·안정 📋',
        desc: '루틴/매뉴얼/예측 가능한 환경에서 강점을 보입니다.',
        strengths: ['정확/일관 운영', '프로세스 준수', '리스크 최소화'],
        risks: ['변화 적응 스트레스', '창의 요구가 큰 곳과는 미스매치', '관성 주의']
      },
      CREATIVE: {
        name: '창의·자유 🎨',
        desc: '실험과 자율이 있는 곳에서 아이디어가 살아납니다.',
        strengths: ['문제 재정의/대안 탐색', '유연한 규칙 활용', '프로토타입 빠른 제작'],
        risks: ['우선순위 분산', '완료정의(DoD) 불명확 위험', '구조/질서 부족 주의']
      },
      DETAIL: {
        name: '디테일·완벽 🔍',
        desc: '품질/정확성/체계화가 중요한 조직과 궁합이 좋아요.',
        strengths: ['퀄리티 바', '체계/표준화 구축', '리뷰·검수 프로세스 적합'],
        risks: ['속도 우선 조직과 충돌', '과도한 완벽주의 경계', '결정 지연 주의']
      }
    };

    // MBTI → 회사 타입 매핑(중복 없이 16개)
    const MBTI_TO_COMPANY = {
      // BALANCE
      ISFP:'BALANCE', INFP:'BALANCE', ISFJ:'BALANCE',
      // GROWTH
      ENTJ:'GROWTH', ENTP:'GROWTH', ESTP:'GROWTH',
      // PEOPLE
      ENFP:'PEOPLE', ESFP:'PEOPLE', ENFJ:'PEOPLE',
      // STABLE
      ISTJ:'STABLE', ESTJ:'STABLE', ISTP:'STABLE',
      // CREATIVE
      INTP:'CREATIVE', INFJ:'CREATIVE',
      // DETAIL
      INTJ:'DETAIL', ESFJ:'DETAIL'
    };

    // ====== 카드 기반 질문 정의 ======
    // img는 자리표시 경로. 실제 이미지가 없으면 회색 상자만 보임.
    const QUESTIONS = [
      { // Q1 J/P
        title:'Q1. 점심 메뉴 고를 때 당신은?',
        options:[
          { id:'A', label:'내가 먹고 싶은 거로!', sub:'결정은 나의 것', img:'images/q1A.png', effect:{J:1} },
          { id:'B', label:'후보 몇 개만', sub:'적당히 고르는 편', img:'images/q1B.png', effect:{} },
          { id:'C', label:'아무거나~', sub:'유연 그 자체', img:'images/q1C.png', effect:{P:1} }
        ]
      },
      { // Q2 J/P 보조
        title:'Q2. 밥 먹는 속도는?',
        options:[
          { id:'A', label:'후다닥!', sub:'속도우선', img:'images/q2A.png', effect:{J:1} },
          { id:'B', label:'보통', sub:'균형 잡힌 속도', img:'images/q2B.png', effect:{} },
          { id:'C', label:'느릿느릿', sub:'음미형', img:'images/q2C.png', effect:{P:1} }
        ]
      },
      { // Q3 E/I
        title:'Q3. 식사 중 대화 스타일은?',
        options:[
          { id:'A', label:'수다가 밥맛!', sub:'함께 먹어야 제맛', img:'images/q3A.png', effect:{E:1} },
          { id:'B', label:'적당히', sub:'상황 따라', img:'images/q3B.png', effect:{} },
          { id:'C', label:'조용히 집중', sub:'먹을 땐 먹자', img:'images/q3C.png', effect:{I:1} }
        ]
      },
      { // Q4 S/N
        title:'Q4. 자리는 어떻게 고르나요?',
        options:[
          { id:'A', label:'늘 같은 자리', sub:'루틴 선호', img:'images/q4A.png', effect:{S:1} },
          { id:'B', label:'그날그날 랜덤', sub:'변화 선호', img:'images/q4B.png', effect:{N:1} }
        ]
      },
      { // Q5 S/N 보조
        title:'Q5. 토핑 취향은?',
        options:[
          { id:'A', label:'기본이 최고', sub:'정석파', img:'images/q5A.png', effect:{S:1} },
          { id:'B', label:'커스텀 좋아요', sub:'실험파', img:'images/q5B.png', effect:{N:1} }
        ]
      },
      { // Q6 E/I 보조
        title:'Q6. 혼밥 vs 다같이?',
        options:[
          { id:'A', label:'다같이!', sub:'함께의 즐거움', img:'images/q6A.png', effect:{E:1} },
          { id:'B', label:'혼밥이 편해', sub:'나만의 시간', img:'images/q6B.png', effect:{I:1} }
        ]
      },
      { // Q7 T/F
        title:'Q7. 메뉴 선택 기준은?',
        options:[
          { id:'A', label:'가성비/칼로리', sub:'데이터 우선', img:'images/q7A.png', effect:{T:1} },
          { id:'B', label:'기분/분위기', sub:'감정 우선', img:'images/q7B.png', effect:{F:1} }
        ]
      },
      { // Q8 T/F 보조
        title:'Q8. 메뉴 충돌 시 해결은?',
        options:[
          { id:'A', label:'후기·거리로 설득', sub:'객관적 근거', img:'images/q8A.png', effect:{T:1} },
          { id:'B', label:'오늘은 네가♥', sub:'타협과 양보', img:'images/q8B.png', effect:{F:1} }
        ]
      }
    ];

    // ====== 상태 ======
    let idx = 0; // 현재 문항 인덱스
    const answers = Array(QUESTIONS.length).fill(null); // A/B/C 저장
    const score = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};

    // ====== 엘리먼트 ======
    const intro = document.getElementById('intro');
    const test = document.getElementById('test');
    const result = document.getElementById('result');
    const qWrap = document.getElementById('qWrap');
    const bar = document.getElementById('bar');
    const countText = document.getElementById('countText');

    // 시작/공유
    document.getElementById('startBtn').onclick = () => { intro.style.display='none'; test.style.display='block'; render(); };
    document.getElementById('shareBtn').onclick = async () => {
      try{ await navigator.clipboard.writeText(location.href); alert('현재 페이지 링크가 복사되었습니다.'); } catch { alert('복사 실패. 수동 복사 부탁드립니다.'); }
    }

    // 이전/건너뛰기(선택 안 하고 넘길 수 있음)
    document.getElementById('prevBtn')?.addEventListener('click', ()=>{ if(idx>0){ idx--; render(); }});
    document.getElementById('nextBtn')?.addEventListener('click', ()=>{ next(); });

    function applyEffect(effect){
      Object.entries(effect||{}).forEach(([k,v])=>{ score[k] = (score[k]||0) + v; });
    }

    function render(){
      const total = QUESTIONS.length;
      bar.style.width = ((idx)/total*100).toFixed(1)+'%';
      countText.textContent = `${idx+1} / ${total}`;

      const q = QUESTIONS[idx];
      qWrap.innerHTML = `
        <div class="q">
          <h3>${q.title}</h3>
          <div class="card-grid">
            ${q.options.map((op, i)=>{
              const selected = answers[idx] && answers[idx].id===op.id ? 'style="border-color:var(--accent)"' : '';
              const imgTag = `<div class=\"thumb\">${op.img ? `<img src=\"${op.img}\" alt=\"${op.label}\">` : '<span class=\"small\">이미지 자리</span>'}</div>`;
              return `<div class=\"choice\" ${selected} data-id=\"${op.id}\">
                        ${imgTag}
                        <div class=\"label\">${op.label}</div>
                        <div class=\"sub\">${op.sub||''}</div>
                      </div>`
            }).join('')}
          </div>
        </div>`;

      qWrap.querySelectorAll('.choice').forEach(el=>{
        el.onclick = () => {
          const pickId = el.getAttribute('data-id');
          const picked = QUESTIONS[idx].options.find(o=>o.id===pickId);
          // 선택 기록 업데이트(이전 선택이 있었다면 점수 롤백 후 재적용)
          if(answers[idx]){ // 롤백
            Object.entries(answers[idx].effect||{}).forEach(([k,v])=>{ score[k]-=v; });
          }
          answers[idx] = picked;
          applyEffect(picked.effect);
          // 다음 문항으로 자동 진행
          next();
        }
      });

      document.getElementById('prevBtn').disabled = (idx===0);
      document.getElementById('nextBtn').textContent = (idx===total-1)?'건너뛰기':'건너뛰기';
    }

    function next(){
      if(idx < QUESTIONS.length-1){ idx++; render(); }
      else { calcAndShow(); }
    }

    function toMBTI(s){
      const EI = s.E===s.I ? (s.E>0? 'E':'I') : (s.E>s.I?'E':'I');
      const SN = s.S===s.N ? 'N' : (s.S>s.N?'S':'N'); // 동점은 N 우선
      const TF = s.T===s.F ? 'F' : (s.T>s.F?'T':'F'); // 동점은 F 우선
      const JP = s.J===s.P ? 'P' : (s.J>s.P?'J':'P'); // 동점은 P 우선
      return EI+SN+TF+JP;
    }

    function calcAndShow(){
      const mbti = toMBTI(score);
      const key = MBTI_TO_COMPANY[mbti] || 'BALANCE';
      showCompany(key, mbti);
    }

    function showCompany(key, mbti){
      const t = COMPANY_TYPES[key];
      bar.style.width = '100%';
      document.getElementById('typeBadge').textContent = `${t.name} · ${mbti}`;
      document.getElementById('typeTitle').textContent = t.name;
      document.getElementById('typeDesc').textContent = t.desc;
      fill('strengths', t.strengths); fill('risks', t.risks); fill('tips', t.tips||[]);
      test.style.display='none'; result.style.display='block';
      const params = new URLSearchParams({ company:key, mbti });
      history.replaceState(null,'', location.pathname + '?' + params.toString());
    }

    function fill(id, arr){ const ul=document.getElementById(id); ul.innerHTML=''; (arr||[]).forEach(x=>{ const li=document.createElement('li'); li.textContent=x; ul.appendChild(li) }) }

    document.getElementById('restartBtn').onclick = () => {
      idx = 0; answers.fill(null); Object.keys(score).forEach(k=>score[k]=0); bar.style.width='0%';
      result.style.display='none'; test.style.display='block'; render();
      history.replaceState(null,'', location.pathname);
    };

    document.getElementById('copyResult').onclick = async () => {
      try{ await navigator.clipboard.writeText(location.href); alert('결과 링크가 복사되었습니다.'); } catch { alert('복사 실패. 주소창의 URL을 복사해주세요.'); }
    };

    (function initFromURL(){
      const p = new URLSearchParams(location.search);
      const company = p.get('company'); const mbti = p.get('mbti');
      if(company && COMPANY_TYPES[company]){ intro.style.display='none'; showCompany(company, mbti||''); }
    })();
  </script>
</body>
</html>
