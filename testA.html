<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸš ë°¥ ìŠµê´€ìœ¼ë¡œ ë³´ëŠ” ë‚˜ì˜ íšŒì‚¬ íƒ€ì…</title>
  <meta name="description" content="ì¹´ë“œ ì„ íƒí˜• ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ Â· ë°¥ ë¨¹ëŠ” ìŠµê´€ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì—ê²Œ ë§ëŠ” íšŒì‚¬ íƒ€ì…" />
  <meta property="og:title" content="ë°¥ ìŠµê´€ íšŒì‚¬ íƒ€ì… í…ŒìŠ¤íŠ¸" />
  <meta property="og:description" content="ì¹´ë“œ ë½‘ê¸°ì²˜ëŸ¼ ê³¨ë¼ë³´ì„¸ìš”. ì›ƒê¸°ì§€ë§Œ ì€ê·¼ ë§ëŠ” ê²°ê³¼!" />
  <meta property="og:type" content="website" />
  <style>
    :root{
      /* íŒŒìŠ¤í…” í…Œë§ˆ (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€) */
      --bg:#fff7fb; --bg-grad1:#ffeef7; --bg-grad2:#fffdf7;
      --card:#ffffff; --text:#3a3746; --muted:#7a7788;
      --accent:#ff93b6; --accent-2:#75d6c7; --shadow:0 14px 32px rgba(255,147,182,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Helvetica, Arial; color:var(--text);
      background: radial-gradient(900px 500px at 20% -10%, var(--bg-grad1) 0%, var(--bg) 40%, var(--bg-grad2) 100%);}
    .wrap{max-width:980px; margin:0 auto; padding:32px 18px 64px}
    .brand{display:flex; align-items:center; gap:10px; margin-bottom:14px}
    .brand .heart{width:10px; height:10px; border-radius:8px; background:var(--accent); box-shadow:0 0 0 6px rgba(255,147,182,.18)}
    h1{font-size:clamp(24px, 4vw, 38px); margin:0}
    p.lead{margin:6px 0 0; color:var(--muted)}

    .card{background:var(--card); border:1px solid rgba(58,55,70,.06); border-radius:22px; box-shadow:var(--shadow)}
    .inner{padding:26px}

    .hero{display:grid; gap:18px}
    @media(min-width:860px){.hero{grid-template-columns:1.3fr .7fr}}
    .hero .visual{background: linear-gradient(135deg, #fff0f5, #e9fff9); border-radius:18px; padding:16px; display:flex; align-items:center; justify-content:center}
    .hero .visual .bubble{width:96px; height:96px; border-radius:24px; background:#fff; border:1px solid rgba(58,55,70,.06); box-shadow:var(--shadow); display:grid; place-items:center; font-size:36px}

    .btn{appearance:none; border:none; border-radius:14px; padding:14px 18px; font-weight:800; cursor:pointer; color:#fff; background: linear-gradient(135deg, var(--accent), #ffc2d8); box-shadow:0 10px 18px rgba(255,147,182,.35)}
    .btn.secondary{background: linear-gradient(135deg, #94e3d5, var(--accent-2)); color:#103a37}
    .btn.ghost{background:#fff; color:var(--text); border:1px solid rgba(58,55,70,.1); box-shadow:none}
    .btn:disabled{opacity:.55; cursor:not-allowed}

    .progress{height:10px; width:100%; background:rgba(58,55,70,.06); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width .25s}

    /* ì¹´ë“œ ì„ íƒ UI */
    .q{margin-top:18px; padding:18px; border-radius:16px; background:#fff8fb; border:1px solid rgba(58,55,70,.08)}
    .q h3{margin:0 0 12px; font-size:18px}

    .card-grid{display:grid; gap:14px; margin-top:10px}
    @media(min-width:720px){.card-grid{grid-template-columns: repeat(3, 1fr)}}

    .choice{display:flex; flex-direction:column; align-items:center; gap:10px; padding:14px; border-radius:16px; background:#fff; border:1px solid rgba(58,55,70,.12); cursor:pointer; transition:transform .08s ease, box-shadow .08s ease, border-color .08s ease}
    .choice:hover{transform:translateY(-2px); box-shadow:0 10px 22px rgba(255,147,182,.18); border-color:var(--accent)}
    .thumb{width:100%; aspect-ratio:1/1; border-radius:12px; background:#fafafa; display:grid; place-items:center; overflow:hidden; border:1px dashed rgba(58,55,70,.12)}
    .thumb img{width:100%; height:100%; object-fit:contain}
    .label{font-weight:700; text-align:center}
    .sub{font-size:13px; color:var(--muted); text-align:center}

    .result{display:none}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#fff; border:1px solid rgba(58,55,70,.12); color:#db3b77; font-weight:800}
    .grid{display:grid; gap:14px}
    @media(min-width:720px){.grid{grid-template-columns: repeat(2,1fr)}}

    footer{margin-top:20px; color:var(--muted); font-size:13px}
    .small{font-size:13px; color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand"><span class="heart"></span><div>
      <h1>ğŸš ë°¥ ìŠµê´€ìœ¼ë¡œ ë³´ëŠ” ë‚˜ì˜ íšŒì‚¬ íƒ€ì…</h1>
      <p class="lead">ì¹´ë“œ ë½‘ê¸°ì²˜ëŸ¼ ê³¨ë¼ë³´ì„¸ìš” Â· ì›ƒê¸°ì§€ë§Œ ì€ê·¼ ë§ëŠ” ê²°ê³¼</p>
    </div></div>

    <!-- Intro -->
    <section id="intro" class="card">
      <div class="inner hero">
        <div>
          <h2 style="margin:0 0 8px 0">ì ì‹¬ ìŠµê´€ìœ¼ë¡œ ì°¾ëŠ” ë‚´ ì·¨í–¥ íšŒì‚¬ ğŸ˜‹</h2>
          <p class="lead">ì¹´ë“œë¥¼ ê³¨ë¼ì£¼ì„¸ìš”. ì„ íƒì€ 8ë²ˆ, ê²°ê³¼ëŠ” 6ê°€ì§€ íšŒì‚¬ íƒ€ì… ì¤‘ í•˜ë‚˜!</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <button class="btn" id="startBtn">ì‹œì‘í•˜ê¸°</button>
            <button class="btn ghost" id="shareBtn" title="ë§í¬ ë³µì‚¬">ê³µìœ  ë§í¬ ë³µì‚¬</button>
          </div>
          <footer>ê°œì¸ì •ë³´ ìˆ˜ì§‘ ì—†ìŒ Â· ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ìë¦¬ í‘œì‹œ(íšŒìƒ‰ ìƒì)ë¡œ ë³´ì…ë‹ˆë‹¤.</footer>
        </div>
        <div class="visual">
          <div class="bubble">ğŸ±</div>
          <div class="bubble" style="margin-left:12px">ğŸœ</div>
          <div class="bubble" style="margin-left:12px">ğŸ—</div>
        </div>
      </div>
    </section>

    <!-- Test: ì¹´ë“œ ì„ íƒí˜• -->
    <section id="test" class="card" style="display:none; margin-top:16px">
      <div class="inner">
        <div class="progress" aria-hidden="true"><i id="bar"></i></div>
        <div id="qWrap"></div>
        <div style="display:flex; gap:10px; margin-top:14px; flex-wrap:wrap">
          <button class="btn secondary" id="prevBtn">ì´ì „</button>
          <button class="btn" id="nextBtn">ê±´ë„ˆë›°ê¸°</button>
        </div>
        <p class="small" id="countText" style="margin-top:10px"></p>
      </div>
    </section>

    <!-- Result -->
    <section id="result" class="card result" style="margin-top:16px">
      <div class="inner">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap">
          <span class="badge" id="typeBadge">ê²°ê³¼ ìœ í˜•</span>
          <button class="btn ghost" id="restartBtn">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸</button>
        </div>
        <h2 id="typeTitle" style="margin:10px 0 6px 0"></h2>
        <p id="typeDesc" class="lead"></p>
        <div class="grid" style="margin-top:16px">
          <div class="q">
            <h3>ì¶”ì²œ í¬ì¸íŠ¸</h3>
            <ul id="strengths"></ul>
          </div>
          <div class="q">
            <h3>ì£¼ì˜ í¬ì¸íŠ¸</h3>
            <ul id="risks"></ul>
          </div>
        </div>
        <div class="q" style="margin-top:16px">
          <h3>í˜„ì‹¤ ì ìš© íŒ</h3>
          <ul id="tips"></ul>
        </div>
        <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
          <button class="btn" id="copyResult">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
        </div>
        <footer>ì°¸ê³ ìš© ìê¸°ì´í•´ ë„êµ¬ì…ë‹ˆë‹¤. ì˜ì‚¬ê²°ì •ì€ ìƒí™©ê³¼ ë§¥ë½ì— ë”°ë¼ ê²€í† í•˜ì„¸ìš”.</footer>
      </div>
    </section>
  </div>

  <script>
    // ====== íšŒì‚¬ íƒ€ì…(ìµœì¢… ê²°ê³¼) ì •ì˜ ======
    const COMPANY_TYPES = {
      BALANCE: {
        name: 'ì›Œë¼ë°¸ ìµì˜¤ ğŸ–ï¸',
        desc: 'íœ´ì‹ê³¼ ì—¬ìœ , ê°œì¸ ë¦¬ë“¬ì„ ì¡´ì¤‘í•˜ëŠ” íšŒì‚¬ê°€ ë”± ë§ì•„ìš”.',
        strengths: ['ìœ ì—°ê·¼ë¬´/ì¹¼í‡´ ë¬¸í™”ì—ì„œ ì»¨ë””ì…˜ ìœ ì§€', 'ê°œë³„ ëª°ì… ì‹œê°„ í™•ë³´', 'ë²ˆì•„ì›ƒ ë°©ì§€í˜• ì¡°ì§ê³¼ ê¶í•© Good'],
        risks: ['ì„±ì¥ ì†ë„ ì§‘ì°© ì¡°ì§ê³¼ëŠ” ì¶©ëŒ', 'íšŒì‹Â·ì‚¬êµ ê°•ìš” ë¬¸í™” í”¼ë¡œ', 'ëª¨ë“  ì—…ë¬´ë¥¼ ëŠê¸‹í•˜ê²ŒëŠ” X']
      },
      GROWTH: {
        name: 'ì„±ì¥ ë“œë¼ì´ë¸Œ ğŸš€',
        desc: 'ë¹ ë¥¸ ì‹¤í–‰/ëª©í‘œ ì§€í–¥ í™˜ê²½ì—ì„œ ì†ë„ê°€ ì¥ì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.',
        strengths: ['ëª©í‘œÂ·ì§€í‘œ ì¤‘ì‹¬ ì‹¤í–‰', 'ìŠ¤í”„ë¦°íŠ¸/ë°ë“œë¼ì¸ ë“œë¼ì´ë¸Œ', 'ì‹¤íŒ¨-í•™ìŠµ ë£¨í”„ ë¹ ë¦„'],
        risks: ['ì¥ê¸° ì›Œë¼ë°¸ ì €í•˜ ìœ„í—˜', 'ê´€ê³„/ì •ì„œ ì¼€ì–´ ë¶€ì¡±', 'ê³¼ì†ìœ¼ë¡œ í’ˆì§ˆ ì €í•˜ ì£¼ì˜']
      },
      PEOPLE: {
        name: 'ì‚¬ëŒ ì¤‘ì‹¬ ğŸ¶',
        desc: 'ê´€ê³„/ì†Œí†µì´ ìµœê³ ì˜ ë³µì§€ì¸ íšŒì‚¬ì—ì„œ ë¹›ë‚˜ìš”.',
        strengths: ['íŒ€ ì¼€ë¯¸/ë¶„ìœ„ê¸° ê°•í™”', 'ê°ˆë“± ì™„ì¶© ì—­í• ', 'ì˜¨ë³´ë”©/ì¡°ìœ¨ ëŠ¥ë ¥'],
        risks: ['ì„±ê³¼ ê°€ì‹œì„± ë‚®ì„ ìˆ˜ ìˆìŒ', 'ê°ì •ì†Œëª¨ ê³¼ë‹¤ ì£¼ì˜', 'ê²½ê³„ì„  ê´€ë¦¬ í•„ìš”']
      },
      STABLE: {
        name: 'ë°˜ë³µÂ·ì•ˆì • ğŸ“‹',
        desc: 'ë£¨í‹´/ë§¤ë‰´ì–¼/ì˜ˆì¸¡ ê°€ëŠ¥í•œ í™˜ê²½ì—ì„œ ê°•ì ì„ ë³´ì…ë‹ˆë‹¤.',
        strengths: ['ì •í™•/ì¼ê´€ ìš´ì˜', 'í”„ë¡œì„¸ìŠ¤ ì¤€ìˆ˜', 'ë¦¬ìŠ¤í¬ ìµœì†Œí™”'],
        risks: ['ë³€í™” ì ì‘ ìŠ¤íŠ¸ë ˆìŠ¤', 'ì°½ì˜ ìš”êµ¬ê°€ í° ê³³ê³¼ëŠ” ë¯¸ìŠ¤ë§¤ì¹˜', 'ê´€ì„± ì£¼ì˜']
      },
      CREATIVE: {
        name: 'ì°½ì˜Â·ììœ  ğŸ¨',
        desc: 'ì‹¤í—˜ê³¼ ììœ¨ì´ ìˆëŠ” ê³³ì—ì„œ ì•„ì´ë””ì–´ê°€ ì‚´ì•„ë‚©ë‹ˆë‹¤.',
        strengths: ['ë¬¸ì œ ì¬ì •ì˜/ëŒ€ì•ˆ íƒìƒ‰', 'ìœ ì—°í•œ ê·œì¹™ í™œìš©', 'í”„ë¡œí† íƒ€ì… ë¹ ë¥¸ ì œì‘'],
        risks: ['ìš°ì„ ìˆœìœ„ ë¶„ì‚°', 'ì™„ë£Œì •ì˜(DoD) ë¶ˆëª…í™• ìœ„í—˜', 'êµ¬ì¡°/ì§ˆì„œ ë¶€ì¡± ì£¼ì˜']
      },
      DETAIL: {
        name: 'ë””í…Œì¼Â·ì™„ë²½ ğŸ”',
        desc: 'í’ˆì§ˆ/ì •í™•ì„±/ì²´ê³„í™”ê°€ ì¤‘ìš”í•œ ì¡°ì§ê³¼ ê¶í•©ì´ ì¢‹ì•„ìš”.',
        strengths: ['í€„ë¦¬í‹° ë°”', 'ì²´ê³„/í‘œì¤€í™” êµ¬ì¶•', 'ë¦¬ë·°Â·ê²€ìˆ˜ í”„ë¡œì„¸ìŠ¤ ì í•©'],
        risks: ['ì†ë„ ìš°ì„  ì¡°ì§ê³¼ ì¶©ëŒ', 'ê³¼ë„í•œ ì™„ë²½ì£¼ì˜ ê²½ê³„', 'ê²°ì • ì§€ì—° ì£¼ì˜']
      }
    };

    // MBTI â†’ íšŒì‚¬ íƒ€ì… ë§¤í•‘(ì¤‘ë³µ ì—†ì´ 16ê°œ)
    const MBTI_TO_COMPANY = {
      // BALANCE
      ISFP:'BALANCE', INFP:'BALANCE', ISFJ:'BALANCE',
      // GROWTH
      ENTJ:'GROWTH', ENTP:'GROWTH', ESTP:'GROWTH',
      // PEOPLE
      ENFP:'PEOPLE', ESFP:'PEOPLE', ENFJ:'PEOPLE',
      // STABLE
      ISTJ:'STABLE', ESTJ:'STABLE', ISTP:'STABLE',
      // CREATIVE
      INTP:'CREATIVE', INFJ:'CREATIVE',
      // DETAIL
      INTJ:'DETAIL', ESFJ:'DETAIL'
    };

    // ====== ì¹´ë“œ ê¸°ë°˜ ì§ˆë¬¸ ì •ì˜ ======
    // imgëŠ” ìë¦¬í‘œì‹œ ê²½ë¡œ. ì‹¤ì œ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ íšŒìƒ‰ ìƒìë§Œ ë³´ì„.
    const QUESTIONS = [
      { // Q1 J/P
        title:'Q1. ì ì‹¬ ë©”ë‰´ ê³ ë¥¼ ë•Œ ë‹¹ì‹ ì€?',
        options:[
          { id:'A', label:'ë‚´ê°€ ë¨¹ê³  ì‹¶ì€ ê±°ë¡œ!', sub:'ê²°ì •ì€ ë‚˜ì˜ ê²ƒ', img:'images/q1A.png', effect:{J:1} },
          { id:'B', label:'í›„ë³´ ëª‡ ê°œë§Œ', sub:'ì ë‹¹íˆ ê³ ë¥´ëŠ” í¸', img:'images/q1B.png', effect:{} },
          { id:'C', label:'ì•„ë¬´ê±°ë‚˜~', sub:'ìœ ì—° ê·¸ ìì²´', img:'images/q1C.png', effect:{P:1} }
        ]
      },
      { // Q2 J/P ë³´ì¡°
        title:'Q2. ë°¥ ë¨¹ëŠ” ì†ë„ëŠ”?',
        options:[
          { id:'A', label:'í›„ë‹¤ë‹¥!', sub:'ì†ë„ìš°ì„ ', img:'images/q2A.png', effect:{J:1} },
          { id:'B', label:'ë³´í†µ', sub:'ê· í˜• ì¡íŒ ì†ë„', img:'images/q2B.png', effect:{} },
          { id:'C', label:'ëŠë¦¿ëŠë¦¿', sub:'ìŒë¯¸í˜•', img:'images/q2C.png', effect:{P:1} }
        ]
      },
      { // Q3 E/I
        title:'Q3. ì‹ì‚¬ ì¤‘ ëŒ€í™” ìŠ¤íƒ€ì¼ì€?',
        options:[
          { id:'A', label:'ìˆ˜ë‹¤ê°€ ë°¥ë§›!', sub:'í•¨ê»˜ ë¨¹ì–´ì•¼ ì œë§›', img:'images/q3A.png', effect:{E:1} },
          { id:'B', label:'ì ë‹¹íˆ', sub:'ìƒí™© ë”°ë¼', img:'images/q3B.png', effect:{} },
          { id:'C', label:'ì¡°ìš©íˆ ì§‘ì¤‘', sub:'ë¨¹ì„ ë• ë¨¹ì', img:'images/q3C.png', effect:{I:1} }
        ]
      },
      { // Q4 S/N
        title:'Q4. ìë¦¬ëŠ” ì–´ë–»ê²Œ ê³ ë¥´ë‚˜ìš”?',
        options:[
          { id:'A', label:'ëŠ˜ ê°™ì€ ìë¦¬', sub:'ë£¨í‹´ ì„ í˜¸', img:'images/q4A.png', effect:{S:1} },
          { id:'B', label:'ê·¸ë‚ ê·¸ë‚  ëœë¤', sub:'ë³€í™” ì„ í˜¸', img:'images/q4B.png', effect:{N:1} }
        ]
      },
      { // Q5 S/N ë³´ì¡°
        title:'Q5. í† í•‘ ì·¨í–¥ì€?',
        options:[
          { id:'A', label:'ê¸°ë³¸ì´ ìµœê³ ', sub:'ì •ì„íŒŒ', img:'images/q5A.png', effect:{S:1} },
          { id:'B', label:'ì»¤ìŠ¤í…€ ì¢‹ì•„ìš”', sub:'ì‹¤í—˜íŒŒ', img:'images/q5B.png', effect:{N:1} }
        ]
      },
      { // Q6 E/I ë³´ì¡°
        title:'Q6. í˜¼ë°¥ vs ë‹¤ê°™ì´?',
        options:[
          { id:'A', label:'ë‹¤ê°™ì´!', sub:'í•¨ê»˜ì˜ ì¦ê±°ì›€', img:'images/q6A.png', effect:{E:1} },
          { id:'B', label:'í˜¼ë°¥ì´ í¸í•´', sub:'ë‚˜ë§Œì˜ ì‹œê°„', img:'images/q6B.png', effect:{I:1} }
        ]
      },
      { // Q7 T/F
        title:'Q7. ë©”ë‰´ ì„ íƒ ê¸°ì¤€ì€?',
        options:[
          { id:'A', label:'ê°€ì„±ë¹„/ì¹¼ë¡œë¦¬', sub:'ë°ì´í„° ìš°ì„ ', img:'images/q7A.png', effect:{T:1} },
          { id:'B', label:'ê¸°ë¶„/ë¶„ìœ„ê¸°', sub:'ê°ì • ìš°ì„ ', img:'images/q7B.png', effect:{F:1} }
        ]
      },
      { // Q8 T/F ë³´ì¡°
        title:'Q8. ë©”ë‰´ ì¶©ëŒ ì‹œ í•´ê²°ì€?',
        options:[
          { id:'A', label:'í›„ê¸°Â·ê±°ë¦¬ë¡œ ì„¤ë“', sub:'ê°ê´€ì  ê·¼ê±°', img:'images/q8A.png', effect:{T:1} },
          { id:'B', label:'ì˜¤ëŠ˜ì€ ë„¤ê°€â™¥', sub:'íƒ€í˜‘ê³¼ ì–‘ë³´', img:'images/q8B.png', effect:{F:1} }
        ]
      }
    ];

    // ====== ìƒíƒœ ======
    let idx = 0; // í˜„ì¬ ë¬¸í•­ ì¸ë±ìŠ¤
    const answers = Array(QUESTIONS.length).fill(null); // A/B/C ì €ì¥
    const score = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};

    // ====== ì—˜ë¦¬ë¨¼íŠ¸ ======
    const intro = document.getElementById('intro');
    const test = document.getElementById('test');
    const result = document.getElementById('result');
    const qWrap = document.getElementById('qWrap');
    const bar = document.getElementById('bar');
    const countText = document.getElementById('countText');

    // ì‹œì‘/ê³µìœ 
    document.getElementById('startBtn').onclick = () => { intro.style.display='none'; test.style.display='block'; render(); };
    document.getElementById('shareBtn').onclick = async () => {
      try{ await navigator.clipboard.writeText(location.href); alert('í˜„ì¬ í˜ì´ì§€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'); } catch { alert('ë³µì‚¬ ì‹¤íŒ¨. ìˆ˜ë™ ë³µì‚¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.'); }
    }

    // ì´ì „/ê±´ë„ˆë›°ê¸°(ì„ íƒ ì•ˆ í•˜ê³  ë„˜ê¸¸ ìˆ˜ ìˆìŒ)
    document.getElementById('prevBtn')?.addEventListener('click', ()=>{ if(idx>0){ idx--; render(); }});
    document.getElementById('nextBtn')?.addEventListener('click', ()=>{ next(); });

    function applyEffect(effect){
      Object.entries(effect||{}).forEach(([k,v])=>{ score[k] = (score[k]||0) + v; });
    }

    function render(){
      const total = QUESTIONS.length;
      bar.style.width = ((idx)/total*100).toFixed(1)+'%';
      countText.textContent = `${idx+1} / ${total}`;

      const q = QUESTIONS[idx];
      qWrap.innerHTML = `
        <div class="q">
          <h3>${q.title}</h3>
          <div class="card-grid">
            ${q.options.map((op, i)=>{
              const selected = answers[idx] && answers[idx].id===op.id ? 'style="border-color:var(--accent)"' : '';
              const imgTag = `<div class=\"thumb\">${op.img ? `<img src=\"${op.img}\" alt=\"${op.label}\">` : '<span class=\"small\">ì´ë¯¸ì§€ ìë¦¬</span>'}</div>`;
              return `<div class=\"choice\" ${selected} data-id=\"${op.id}\">
                        ${imgTag}
                        <div class=\"label\">${op.label}</div>
                        <div class=\"sub\">${op.sub||''}</div>
                      </div>`
            }).join('')}
          </div>
        </div>`;

      qWrap.querySelectorAll('.choice').forEach(el=>{
        el.onclick = () => {
          const pickId = el.getAttribute('data-id');
          const picked = QUESTIONS[idx].options.find(o=>o.id===pickId);
          // ì„ íƒ ê¸°ë¡ ì—…ë°ì´íŠ¸(ì´ì „ ì„ íƒì´ ìˆì—ˆë‹¤ë©´ ì ìˆ˜ ë¡¤ë°± í›„ ì¬ì ìš©)
          if(answers[idx]){ // ë¡¤ë°±
            Object.entries(answers[idx].effect||{}).forEach(([k,v])=>{ score[k]-=v; });
          }
          answers[idx] = picked;
          applyEffect(picked.effect);
          // ë‹¤ìŒ ë¬¸í•­ìœ¼ë¡œ ìë™ ì§„í–‰
          next();
        }
      });

      document.getElementById('prevBtn').disabled = (idx===0);
      document.getElementById('nextBtn').textContent = (idx===total-1)?'ê±´ë„ˆë›°ê¸°':'ê±´ë„ˆë›°ê¸°';
    }

    function next(){
      if(idx < QUESTIONS.length-1){ idx++; render(); }
      else { calcAndShow(); }
    }

    function toMBTI(s){
      const EI = s.E===s.I ? (s.E>0? 'E':'I') : (s.E>s.I?'E':'I');
      const SN = s.S===s.N ? 'N' : (s.S>s.N?'S':'N'); // ë™ì ì€ N ìš°ì„ 
      const TF = s.T===s.F ? 'F' : (s.T>s.F?'T':'F'); // ë™ì ì€ F ìš°ì„ 
      const JP = s.J===s.P ? 'P' : (s.J>s.P?'J':'P'); // ë™ì ì€ P ìš°ì„ 
      return EI+SN+TF+JP;
    }

    function calcAndShow(){
      const mbti = toMBTI(score);
      const key = MBTI_TO_COMPANY[mbti] || 'BALANCE';
      showCompany(key, mbti);
    }

    function showCompany(key, mbti){
      const t = COMPANY_TYPES[key];
      bar.style.width = '100%';
      document.getElementById('typeBadge').textContent = `${t.name} Â· ${mbti}`;
      document.getElementById('typeTitle').textContent = t.name;
      document.getElementById('typeDesc').textContent = t.desc;
      fill('strengths', t.strengths); fill('risks', t.risks); fill('tips', t.tips||[]);
      test.style.display='none'; result.style.display='block';
      const params = new URLSearchParams({ company:key, mbti });
      history.replaceState(null,'', location.pathname + '?' + params.toString());
    }

    function fill(id, arr){ const ul=document.getElementById(id); ul.innerHTML=''; (arr||[]).forEach(x=>{ const li=document.createElement('li'); li.textContent=x; ul.appendChild(li) }) }

    document.getElementById('restartBtn').onclick = () => {
      idx = 0; answers.fill(null); Object.keys(score).forEach(k=>score[k]=0); bar.style.width='0%';
      result.style.display='none'; test.style.display='block'; render();
      history.replaceState(null,'', location.pathname);
    };

    document.getElementById('copyResult').onclick = async () => {
      try{ await navigator.clipboard.writeText(location.href); alert('ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'); } catch { alert('ë³µì‚¬ ì‹¤íŒ¨. ì£¼ì†Œì°½ì˜ URLì„ ë³µì‚¬í•´ì£¼ì„¸ìš”.'); }
    };

    (function initFromURL(){
      const p = new URLSearchParams(location.search);
      const company = p.get('company'); const mbti = p.get('mbti');
      if(company && COMPANY_TYPES[company]){ intro.style.display='none'; showCompany(company, mbti||''); }
    })();
  </script>
</body>
</html>
